# CRIAR NOVO ARQUIVO recursos.py
from flask_restful import Resource, reqparse
from app.models import Professores
from app import db


class User_modelo(Resource):

    argumentos = reqparse.RequestParser()
    argumentos.add_argument('nome')
    argumentos.add_argument('email')
    argumentos.add_argument('senha')


    #@jwt_required()
    def get(self):
        return {'Usuarios':[usuari.json() for usuari in Professores.query.all()]}

    def post(self):
        dados = User_modelo.argumentos.parse_args()
        users = Professores(**dados)
        db.session.add(users)
        db.session.commit()
        return usuari.json(), 201
    

class User_modelo(Resource):

    argumentos = reqparse.RequestParser()
    argumentos.add_argument('nome')
    argumentos.add_argument('email')
    argumentos.add_argument('senha')


    #@jwt_required()
    def get(self, id):
        users = Professores.query_by(id=id).first()
        if users:
            return usuari.json()
        return {'message': 'Usuario inexistente'}, 404

    #@jwt_required()
    def put(self, id):
        dados = User_modelo.argumentos.parse_args()
        users = Professores(**dados)
        user_encontrado = Professores.query.filter_by(id=id).first()
        if user_encontrado:
            user_encontrado.query.filter_by(id=id).update({**dados})
            db.session.commit()
            return user_encontrado.json(), 200
        db.session.add(users)
        db.session.commit()
        return usuari.json(), 201